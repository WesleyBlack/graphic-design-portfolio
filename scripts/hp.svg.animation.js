window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return setTimeout(b,1E3/60)};var ball=document.getElementById("flipper");
function drawSVG(){for(var b=document.getElementById("pt1").getBoundingClientRect(),a=[{c1:"c1",c2:"c2",pt2:"pt2"},{c1:"c3",c2:"c4",pt2:"pt3"},{c1:"c5",c2:"c6",pt2:"pt4"},{c1:"c7",c2:"c8",pt2:"pt5"},{c1:"c9",c2:"c10",pt2:"pt6"},{c1:"c11",c2:"c12",pt2:"pt7"},{c1:"c13",c2:"c14",pt2:"pt8"}],c=" ",d=0;d<a.length;d++)c+=" C"+(document.getElementById(a[d].c1).getBoundingClientRect().width/2+(document.getElementById(a[d].c1).getBoundingClientRect().left+window.pageXOffset))+","+(document.getElementById(a[d].c1).getBoundingClientRect().height/
2+(document.getElementById(a[d].c1).getBoundingClientRect().top+window.pageYOffset))+" "+(document.getElementById(a[d].c1).getBoundingClientRect().width/2+(document.getElementById(a[d].c2).getBoundingClientRect().left+window.pageXOffset))+","+(document.getElementById(a[d].c1).getBoundingClientRect().height/2+(document.getElementById(a[d].c2).getBoundingClientRect().top+window.pageYOffset))+" "+(document.getElementById(a[d].c1).getBoundingClientRect().width/2+(document.getElementById(a[d].pt2).getBoundingClientRect().left+
window.pageXOffset))+","+(document.getElementById(a[d].c1).getBoundingClientRect().height/2+(document.getElementById(a[d].pt2).getBoundingClientRect().top+window.pageYOffset));document.getElementById("rail-path").setAttribute("d","M"+(b.width/2+(b.left+window.pageXOffset))+","+(b.height/2+(b.top+window.pageYOffset))+c)}
function isCollide(){for(var b=document.getElementById("ball").getBoundingClientRect(),a=[{pos:"identities",cla:"bw1"},{pos:"web",cla:"bw2"},{pos:"more",cla:"bw3"}],c=0;c<a.length;c++)b.top+b.height<document.getElementById(a[c].pos).getBoundingClientRect().top||b.top>document.getElementById(a[c].pos).getBoundingClientRect().top+document.getElementById(a[c].pos).getBoundingClientRect().height||b.left+b.width<document.getElementById(a[c].pos).getBoundingClientRect().left||b.left>document.getElementById(a[c].pos).getBoundingClientRect().left+
document.getElementById(a[c].pos).getBoundingClientRect().width?document.getElementById(a[c].pos).classList.add(a[c].cla):document.getElementById(a[c].pos).classList.contains(a[c].cla)&&document.getElementById(a[c].pos).classList.remove(a[c].cla)}var scrollY=0,speed=.08,path=document.getElementById("rail-path"),pathLen=0,logoFlippers=["content","nav-flipper"];function pathLength(){pathLen=path.getTotalLength()}
function positionTheBall(){for(var b=(document.documentElement.scrollTop+document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight),a=0;a<logoFlippers.length;a++).005>=b?document.getElementById(logoFlippers[a]).classList.contains("rsd")&&(document.getElementById(logoFlippers[a]).classList.remove("rsd"),document.getElementById(logoFlippers[a]).style.animation="none",document.getElementById(logoFlippers[a]).offsetHeight,document.getElementById(logoFlippers[a]).style.animation=
null,document.getElementById(logoFlippers[a]).classList.add("brsd")):(document.getElementById(logoFlippers[a]).classList.contains("brsd")&&(document.getElementById(logoFlippers[a]).classList.remove("brsd"),document.getElementById(logoFlippers[a]).style.animation="none",document.getElementById(logoFlippers[a]).offsetHeight,document.getElementById(logoFlippers[a]).style.animation=null),document.getElementById(logoFlippers[a]).classList.add("rsd"));scrollY+=(b-scrollY)*speed;b=path.getPointAtLength(scrollY*
pathLen);ball.style.webkitTransform="translate3d("+b.x+"px , "+(b.y-(document.documentElement.scrollTop+document.body.scrollTop))+"px, 0px";isCollide();window.requestAnimationFrame(positionTheBall)}window.addEventListener("resize",function(){drawSVG();pathLength()});drawSVG();pathLength();positionTheBall();
function drawLines(){for(var b=[{c1:"c1",pt1:"pt1"},{c1:"c2",pt1:"pt2"},{c1:"c3",pt1:"pt2"},{c1:"c4",pt1:"pt3"},{c1:"c5",pt1:"pt3"},{c1:"c6",pt1:"pt4"},{c1:"c7",pt1:"pt4"},{c1:"c8",pt1:"pt5"},{c1:"c9",pt1:"pt5"},{c1:"c10",pt1:"pt6"},{c1:"c11",pt1:"pt6"},{c1:"c12",pt1:"pt7"},{c1:"c13",pt1:"pt7"},{c1:"c14",pt1:"pt8"}],a=0;a<b.length;a++)document.getElementById("path"+(a+1)).setAttribute("x1",document.getElementById(b[a].c1).getBoundingClientRect().width/2+(document.getElementById(b[a].c1).getBoundingClientRect().left+
window.pageXOffset)),document.getElementById("path"+(a+1)).setAttribute("y1",document.getElementById(b[a].c1).getBoundingClientRect().height/2+(document.getElementById(b[a].c1).getBoundingClientRect().top+window.pageYOffset)),document.getElementById("path"+(a+1)).setAttribute("x2",document.getElementById(b[a].pt1).getBoundingClientRect().width/2+(document.getElementById(b[a].pt1).getBoundingClientRect().left+window.pageXOffset)),document.getElementById("path"+(a+1)).setAttribute("y2",document.getElementById(b[a].pt1).getBoundingClientRect().height/
2+(document.getElementById(b[a].pt1).getBoundingClientRect().top+window.pageYOffset))}var selected=null,x_pos=0,y_pos=0,x_elem=0,y_elem=0;function _drag_init(b){selected=b;x_elem=x_pos-selected.offsetLeft;y_elem=y_pos-selected.offsetTop}
function _move_elem(b){var a=document.getElementById("wrapper").getBoundingClientRect(),c=document.body.getBoundingClientRect();x_pos=document.all?window.event.clientX:b.pageX;y_pos=b.pageY;null!==selected&&(selected.style.left=(x_pos-a.left-.08*c.width)/(a.width-.16*c.width)*100+"%",selected.style.top=y_pos/window.innerHeight*100+"vh",drawSVG(),pathLength(),drawLines())}function _destroy(){selected=null}
for(var anchors="c1 pt1 c2 pt2 c3 c4 pt3 c5 c6 pt4 c7 c8 pt5 c9 c10 pt6 c11 c12 pt7 c13 c14 pt8".split(" "),i=0;i<anchors.length;i++)document.getElementById(anchors[i]).onmousedown=function(){_drag_init(this);return!1},document.getElementById(anchors[i]).ontouchstart=function(){_drag_init(this);return!1};var edit=!1;
function editPath(){edit=!edit;selected=null;edit?(document.getElementById("rail-container").style.visibility="visible",document.onmousemove=_move_elem,document.onmouseup=_destroy,document.ontouchmove=_move_elem,document.ontouchend=_destroy,drawLines(),window.addEventListener("resize",drawLines)):(document.getElementById("rail-container").style.visibility="hidden",document.onmousemove=null,document.ontouchmove=null,window.removeEventListener("resize",drawLines))};